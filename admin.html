<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fleet Management</title>

    <style>
        body{
            margin:0;
            padding:0;
            background-color:white;
            font-family: Arial;
        }
        .navbar{
            padding:10px;
            background-color: grey;
            display: flex;
            gap:20px;
            align-items: center;
        }
        .container{
            display:flex;
        }
        .sidebar{
            width:25%;
            padding:20px;
            background:#eee;
        }
        .main-content{
            width:75%;
            padding:20px;
        }
        .card-grid{
            display:grid;
            grid-template-columns: repeat(3, 1fr);
            gap:20px;
        }
        .card{
            background:white;
            padding:10px;
            border:1px solid #ccc;
            border-radius:6px;
        }
        .status-Available{
            color:green;
            font-weight:bold;
        }
        .status-Unavailable{
            color:red;
            font-weight:bold;
        }
        button{
            margin-top:5px;
        }
    </style>
</head>

<body>

   <div class="navbar">
        <label for="category-filter">Category</label>
        <select id="category-filter">
            <option value="All">All</option>
            <option value="Auto">Auto</option>
            <option value="car">car</option>
            <option value="truck">truck</option>
            <option value="bus">bus</option>
        </select>

        <label for="availability">Availability</label>
        <select id="availability">
            <option value="All">All</option>
            <option value="Available">Available</option>
            <option value="Unavailable">Unavailable</option>
        </select>

        <button id="clear-filter">Clear Filter</button>
   </div>

   <div class="container">
        <div class="sidebar">
            <h3>Add New Vehicle</h3>
            <form id="fleet-form">
                <label>Reg No</label><br>
                <input type="text" id="regNo" required><br><br>

                <label>Category</label><br>
                <select id="category" required>
                    <option value="">Select category</option>
                    <option value="Auto">Auto</option>
                    <option value="car">car</option>
                    <option value="truck">truck</option>
                    <option value="bus">bus</option>
                </select><br><br>

                <label>Driver Name</label><br>
                <input type="text" id="drivername" required><br><br>

                <label>Availability</label><br>
                <select id="isavailable">
                    <option value="Available">Available</option>
                    <option value="Unavailable">Unavailable</option>
                </select><br><br>

                <button type="submit">Add Fleet</button>
            </form>
        </div>

        <div class="main-content">
            <h3>Current Fleet</h3>
            <div id="card-grid" class="card-grid"></div>
        </div>
   </div>

<script>
    let fleet = [];

    const imageurl = "https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png";

    const createCard = (v) => {
        return `
            <div class="card" data-regno="${v.regNo}">
                <img src="${imageurl}" width="100%" />
                <h4>${v.regNo}</h4>
                <p>Category: <strong>${v.category}</strong></p>
                <p>Driver: <strong>${v.drivername}</strong></p>
                <p>Status: <span class="status-${v.isavailable}">${v.isavailable}</span></p>

                <button onclick="updateDriver('${v.regNo}')">Update Driver</button><br>
                <button onclick="changeAvailability('${v.regNo}')">Change Availability</button><br>
                <button onclick="deleteVehicle('${v.regNo}')">Delete</button>
            </div>
        `;
    };

    const render = () => {
        const cardGrid = document.getElementById("card-grid");

        let categoryFilter = document.getElementById("category-filter").value;
        let availabilityFilter = document.getElementById("availability").value;

        let filtered = fleet.filter(v => {
            return (categoryFilter === "All" || v.category === categoryFilter) &&
                   (availabilityFilter === "All" || v.isavailable === availabilityFilter);
        });

        cardGrid.innerHTML = filtered.map(createCard).join('');
    };

    document.getElementById("fleet-form").addEventListener("submit", function(e){
        e.preventDefault();

        let regNo = regNo.value.trim();
        let category = category.value;
        let drivername = drivername.value.trim();
        let isavailable = isavailable.value;

        if (!regNo || !category || !drivername) {
            alert("All fields required");
            return;
        }

        fleet.push({
            regNo,
            category,
            drivername,
            isavailable
        });

        this.reset();
        render();
    });

    // Update driver
    function updateDriver(regNo) {
        let newDriver = prompt("Enter new driver name:");
        if (!newDriver) return;

        let v = fleet.find(v => v.regNo === regNo);
        v.drivername = newDriver;

        render();
    }

    // Change status
    function changeAvailability(regNo) {
        let v = fleet.find(v => v.regNo === regNo);
        v.isavailable = v.isavailable === "Available" ? "Unavailable" : "Available";
        render();
    }

    // Delete
    function deleteVehicle(regNo) {
        fleet = fleet.filter(v => v.regNo !== regNo);
        render();
    }

    // Filters
    document.getElementById("category-filter").onchange = render;
    document.getElementById("availability").onchange = render;

    document.getElementById("clear-filter").onclick = () => {
        document.getElementById("category-filter").value = "All";
        document.getElementById("availability").value = "All";
        render();
    };

    document.addEventListener("DOMContentLoaded", render);
</script>

</body>
</html>
